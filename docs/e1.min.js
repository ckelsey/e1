!function e(t,n,i){function r(s,a){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[s]={exports:{}};t[s][0].call(c.exports,function(e){var n=t[s][1][e];return r(n||e)},c,c.exports,e,t,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var r=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=t,this.update=this.update,this.label=window.E1.getModel(this.el,"label"),this.list=this.getList();var i=window.document.createElement("div");i.className="dropdown-container",/iPad|iPhone|iPod|Android/.test(window.navigator.userAgent)||i.classList.add("non-mobile"),i.appendChild(this.getLabel()),i.appendChild(this.getOptions()),this.el.appendChild(i);var r,o=!1;window.document.body.addEventListener("click",function(e){clearTimeout(o);var t=e.path?e.path[0]:e.originalTarget?e.originalTarget:e.target;o=setTimeout(function(){var e=n.el.querySelector(".dropdown-container");try{t===n.el.querySelector(".dropdown-list-label")?e.classList.toggle("mouseenter"):t===n.el||n.el.contains(t)||e.classList.remove("mouseenter")}catch(e){}},10)});/iPad|iPhone|iPod|Android/.test(window.navigator.userAgent)||(this.el.addEventListener("mouseenter",function(){clearTimeout(r),n.el.querySelector(".dropdown-container").classList.add("mouseenter")},!1),this.el.addEventListener("mouseleave",function(){r=setTimeout(function(){n.el.querySelector(".dropdown-container").classList.remove("mouseenter")},380)}))}return i(e,[{key:"getLabel",value:function(){var e=window.E1.getModel(this.el,"label"),t=window.document.createElement("div");return t.className="dropdown-list-label",t.innerHTML=window.E1.cleanHtml(e),this.list&&this.list.length&&t.classList.add("has-options"),t}},{key:"getOptions",value:function(){var e=this,t=window.document.createElement("div");return t.className="dropdown-list-options",this.list&&this.list.length&&this.list.forEach(function(n,i){var r=window.document.createElement("div");r.className="dropdown-list-option",r.innerHTML=window.E1.cleanHtml(n),r.setAttribute("option-key",i);var o=!1;r.addEventListener("click",function(t){clearTimeout(o),o=setTimeout(function(){var n=e.el.querySelector(".dropdown-container");n.classList.contains("mouseenter")&&(e.el.optionClicked&&"function"==typeof e.el.optionClicked&&e.el.optionClicked(t,r),window.requestAnimationFrame(function(){n.classList.remove("mouseenter")}))},10)}),t.appendChild(r)}),t}},{key:"getList",value:function(){var e=window.E1.getModel(this.el,"list");try{e=JSON.parse(e)}catch(e){}return"string"==typeof e&&(e=e.split(",").map(function(e){return e.trim()})),e}},{key:"update",value:function(){var e=this.el.querySelector(".dropdown-container"),t=window.E1.getModel(this.el,"label"),n=this.getList();JSON.stringify(n)!==JSON.stringify(this.list)&&(this.list=n,e.replaceChild(this.getOptions(),e.querySelector(".dropdown-list-options"))),t!==this.label&&(this.label=t,e.replaceChild(this.getLabel(),e.querySelector(".dropdown-list-label")))}}]),e}();window.E1.registerComponent("dropdown-list",r)},{}],2:[function(e,t,n){"use strict";e("./dropdown-list")},{"./dropdown-list":1}],3:[function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=t,this.el["e1-class-onUpdate"]=this.update,this.classes=[],this.renderClasses()}return i(e,[{key:"renderClasses",value:function(){var e=this,t=[];this.el.getAttribute("e1-class").split(",").map(function(e){return e.trim()}).forEach(function(e){var n=e.split(":").map(function(e){return e.trim()});if(n.length>1){var i=window.E1.getModel(null,n[0]);"@"===n[1].substring(0,1)&&(n[1]=window.E1.getModel(null,n[1])),i?-1===t.indexOf(n[1])&&t.push(n[1]):t.indexOf(n[1])>-1&&t.splice(t.indexOf(n[1]),1)}else{(e=window.E1.getModel(null,n[0]))&&t.push(e)}}),this.classes.forEach(function(n){-1===t.indexOf(n)&&e.el.classList.remove(n)}),this.classes=t,this.classes.forEach(function(t){e.el.classList.add(t)})}},{key:"update",value:function(){this.renderClasses()}}]),e}();window.E1.registerAttribute("e1-class",r)},{}],4:[function(e,t,n){"use strict";e("./e1-class")},{"./e1-class":3}],5:[function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=t,this.el["e1-content-onUpdate"]=this.update,this.content=window.E1.cleanHtml(window.E1.getModel(this.el,"e1-content")),this.el.innerHTML=this.content}return i(e,[{key:"update",value:function(){var e=window.E1.cleanHtml(window.E1.getModel(this.el,"e1-content"));e!==this.content&&(this.content=e,this.el.innerHTML=this.content)}}]),e}();window.E1.registerAttribute("e1-content",r)},{}],6:[function(e,t,n){"use strict";e("./e1-content")},{"./e1-content":5}],7:[function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=t,this.el["e1-if-onUpdate"]=this.update,this.content=this.el.innerHTML,this.el.innerHTML="",this.update()}return i(e,[{key:"update",value:function(){var e=window.E1.getModel(this.el,"e1-if");this.el.innerHTML=e?this.content:"",window.E1.scan(this.el)}}]),e}();window.E1.registerAttribute("e1-if",r)},{}],8:[function(e,t,n){"use strict";e("./e1-if")},{"./e1-if":7}],9:[function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=t,this.el["e1-show-onUpdate"]=this.update,this.update()}return i(e,[{key:"update",value:function(){window.E1.getModel(this.el,"e1-show")?this.el.style.removeProperty("display"):this.el.style.display="none"}}]),e}();window.E1.registerAttribute("e1-show",r)},{}],10:[function(e,t,n){"use strict";e("./e1-show")},{"./e1-show":9}],11:[function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),console.log("EEEK",t),this.el=t,this.el["e1-test-onUpdate"]=this.update}return i(e,[{key:"update",value:function(){}}]),e}();window.E1.registerAttribute("e1-test",r)},{}],12:[function(e,t,n){"use strict";e("./e1-test")},{"./e1-test":11}],13:[function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var r=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=t,this.el["e1-value-onUpdate"]=this.update,this.value=window.E1.getModel(this.el,"e1-value"),this.valueType=this.typeOfValue(this.value),this.setValue(),"checkbox"!==this.el.type?this.el.addEventListener("input",function(){window.E1.setModel(n.el,"e1-value",n.el.value)}):this.el.addEventListener("click",function(){window.E1.setModel(n.el,"e1-value",n.el.checked)})}return i(e,[{key:"typeOfValue",value:function(e){try{e=JSON.parse(e)}catch(e){}if(void 0===e)return"undefined";if(null===e)return"null";if(!0===e||!1===e)return"boolean";if("number"==typeof e)return"number";if("[object Date]"===Object.prototype.toString.call(e)||e.indexOf&&e.indexOf(":")>-1&&"Invalid Date"!==new Date(e)&&!isNaN(new Date(e)))return"date";if("string"==typeof e)return"string";var t={}.toString.apply(e);return"[object Array]"===t?"array":"[object Object]"===t?"object":"[object Function]"===t?"function":void 0}},{key:"setValue",value:function(){this.el.setAttribute("value",window.E1.getModel(this.el,"e1-value")),"textarea"===this.el.nodeName.toLowerCase()&&(this.el.innerHTML=window.E1.getModel(this.el,"e1-value")),"checkbox"===this.el.type&&(this.value?this.el.setAttribute("checked",!0):this.el.removeAttribute("checked"))}},{key:"update",value:function(){this.setValue()}}]),e}();window.E1.registerAttribute("e1-value",r)},{}],14:[function(e,t,n){"use strict";e("./e1-value")},{"./e1-value":13}],15:[function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var o=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bindings={},this.components={},this.models={},this.services={},this.subscriptions={},this.ids=[],this.cleanHtml=this.cleanHtml,this.generateId=this.generateId,this.getModel=this.getModel,this.getThis=this.getThis,this.registerComponent=this.registerComponent,this.registerElement=this.registerElement,this.scan=this.scan,this.setModel=this.setModel,this.setThis=this.setThis,this.subscribe=this.subscribe,this.updateBindings=this.updateBindings,this.observer=new window.MutationObserver(function(e){var n=Object.keys(t.components),i=function(e,n){e.nodeName&&e.nodeName.toLowerCase()===n&&t.components[n]._initElement(e)};e.forEach(function(e){if(e.addedNodes.length)for(var t=0;t<e.addedNodes.length;t++)n.forEach(function(n,r){i(e.addedNodes[t],r)})})})}return r(e,[{key:"cleanHtml",value:function(e){return e?e.toString().replace(/<script[^>]*?>.*?<\/script>/gi,"").replace(/<style[^>]*?>.*?<\/style>/gi,"").replace(/<![\s\S]*?--[ \t\n\r]*>/gi,""):""}},{key:"generateId",value:function(){for(var e=function(){for(var e="",t="abcdefghijklmnopqrstuvwxyz",n=0;n<26;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},t=e();this.ids.indexOf(t)>-1;)t=e();return this.ids.push(t),t}},{key:"getModel",value:function(e,t,n){var i;if(!e&&!t)return n;if(e&&t){var r=e.getAttribute(t);if(!r||"@"!==r.substring(0,1)){try{r=JSON.parse(r)}catch(e){}return r||n}i=r.substring(1,r.length)}else!e&&t&&"@"===t.substring(0,1)&&(i=t.substring(1,t.length));if(!i)return n;var o=(i=i.split(".")).shift();return this.services[o]?o=this.services[o]:(i.unshift(o),o=window),i=i.join("."),this.getThis(o,i,n)}},{key:"getThis",value:function(e,t,n){var i=(t=t&&t.toString().split?[e].concat(t.toString().split(".")):[e]).reduce(function(e,t){return void 0===e?n:t?e[t]:e});return void 0===i?n:i}},{key:"registerComponent",value:function(e,t){var n=this;this.components[e]={service:t,_initElement:function(t){if(-1===n.components[e].registeredElements.indexOf(t)){var i=new n.components[e].service(t);n.components[e].registeredElements.push(t),t.setAttribute("component-id",n.generateId()),t.onUpdate||(t.onUpdate=[]),t.onUpdate.push(i.update.bind(i)),n.registerElement(t)}},registeredElements:[],scan:function(t){var i=t.querySelectorAll(e);if(i.length)for(var r=0;r<i.length;r++)n.components[e]._initElement(i[r])}},"complete"===window.document.readyState&&this.components[e].scan(window.document.body)}},{key:"registerAttribute",value:function(e,t){var n=this;this.components[e]={service:t,_initElement:function(t){if(-1===n.components[e].registeredElements.indexOf(t)){var i=new n.components[e].service(t);n.components[e].registeredElements.push(t),t.onUpdate||(t.onUpdate=[]),t.onUpdate.push(i.update.bind(i)),n.registerElement(t)}},registeredElements:[],scan:function(t){var i=t.querySelectorAll("["+e+"]");if(i.length)for(var r=0;r<i.length;r++)n.components[e]._initElement(i[r])}},"complete"===window.document.readyState&&this.components[e].scan(window.document.body)}},{key:"registerElement",value:function(e){var t=this;if(e&&e.attributes)for(var n=e.attributes,i=0;i<n.length;i++){var r=n[i].value;if("@"===r.substring(0,1))r.split(",").map(function(e){return e.trim()}).forEach(function(n){var i=n.split(":")[0];t.bindings[i]||(t.bindings[i]=[]),t.bindings[i].push(e)})}}},{key:"registerService",value:function(e,t){this.services[e]=t,this.updateBindings("@"+e,t)}},{key:"scan",value:function(e){for(var t in this.components)this.components[t]&&this.components[t].scan(e)}},{key:"setModel",value:function(e,t,n){var r;if(!e&&!t)return!1;if(e&&t){var o=e.getAttribute(t);o&&"@"===o.substring(0,1)&&(r=o.substring(1,o.length))}else!e&&t&&"@"===t.substring(0,1)&&(r=t.substring(1,t.length));if(!r)return!1;var s=r,a=(r=r.split(".")).shift();this.services[a]?a=this.services[a]:(r.unshift(a),a=window),r=r.join(".");var u=this.getThis(a,r);try{u=JSON.parse(JSON.stringify(u))}catch(e){}this.setThis(a,r,n);var l=this.getThis(a,r),c=u;try{"object"===(void 0===u?"undefined":i(u))&&"object"===(void 0===l?"undefined":i(l))?c=Object.assign(u,l):l&&(c=l)}catch(e){}return this.updateBindings("@"+s,c),l}},{key:"setThis",value:function(e,t,n){return(t=t?[e].concat(t.split(".")):[e]).reduce(function(e,i){return e||(e={}),e[i]||(e[i]={}),i?(i===t[t.length-1]&&(e[i]=n),e[i]):(e[i]=null,e)})}},{key:"subscribe",value:function(e,t){this.subscriptions[e]||(this.subscriptions[e]=[]),this.subscriptions[e].push(t)}},{key:"updateBindings",value:function(e,t){var n=this.bindings[e],r=this.subscriptions[e];if(r&&r.length&&r.forEach(function(e){e(t)}),n&&n.length&&n.forEach(function(e){e.onUpdate&&e.onUpdate.forEach(function(e){e()})}),t&&"object"===(void 0===t?"undefined":i(t)))for(var o in t)t[o]&&this.updateBindings(e+"."+o,t[o])}}]),e}();window.E1=new o,t.export=window.E1,"complete"===window.document.readyState?(window.E1.observer.observe(window.document.body,{attributes:!0,attributeOldValue:!0,childList:!0,subtree:!0,characterData:!0}),window.E1.scan(window.document.body)):window.document.addEventListener("DOMContentLoaded",function(){window.E1.observer.observe(window.document.body,{attributes:!0,attributeOldValue:!0,childList:!0,subtree:!0,characterData:!0}),window.E1.scan(window.document.body)})},{}],16:[function(e,t,n){"use strict";e("./e1"),e("./dropdown-list"),e("./e1-value"),e("./e1-content"),e("./e1-class"),e("./e1-show"),e("./e1-if"),e("./e1-test")},{"./dropdown-list":2,"./e1":15,"./e1-class":4,"./e1-content":6,"./e1-if":8,"./e1-show":10,"./e1-test":12,"./e1-value":14}]},{},[16]);
//# sourceMappingURL=e1.min.js.map
