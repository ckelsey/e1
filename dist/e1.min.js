!function e(t,n,i){function o(s,a){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(r)return r(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[s]={exports:{}};t[s][0].call(c.exports,function(e){var n=t[s][1][e];return o(n||e)},c,c.exports,e,t,n,i)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var o=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=t,this.update=this.update,this.label=E1.getModel(this.el,"label"),this.list=this.getList();var i=window.document.createElement("div");i.className="dropdown-container",/iPad|iPhone|iPod|Android/.test(window.navigator.userAgent)||i.classList.add("non-mobile"),i.appendChild(this.getLabel()),i.appendChild(this.getOptions()),this.el.appendChild(i);var o,r=!1;window.document.body.addEventListener("click",function(e){clearTimeout(r);var t=e.path?e.path[0]:e.originalTarget?e.originalTarget:e.target;r=setTimeout(function(){var e=n.el.querySelector(".dropdown-container");try{t===n.el.querySelector(".dropdown-list-label")?e.classList.toggle("mouseenter"):t===n.el||n.el.contains(t)||e.classList.remove("mouseenter")}catch(e){}},10)});/iPad|iPhone|iPod|Android/.test(window.navigator.userAgent)||(this.el.addEventListener("mouseenter",function(){clearTimeout(o),n.el.querySelector(".dropdown-container").classList.add("mouseenter")},!1),this.el.addEventListener("mouseleave",function(){o=setTimeout(function(){n.el.querySelector(".dropdown-container").classList.remove("mouseenter")},380)}))}return i(e,[{key:"getLabel",value:function(){var e=E1.getModel(this.el,"label"),t=window.document.createElement("div");return t.className="dropdown-list-label",t.innerHTML=E1.cleanHtml(e),this.list&&this.list.length&&t.classList.add("has-options"),t}},{key:"getOptions",value:function(){var e=this,t=window.document.createElement("div");return t.className="dropdown-list-options",this.list.length&&this.list.forEach(function(n,i){var o=window.document.createElement("div");o.className="dropdown-list-option",o.innerHTML=E1.cleanHtml(n),o.setAttribute("option-key",i);var r=!1;o.addEventListener("click",function(t){clearTimeout(r),r=setTimeout(function(){var n=e.el.querySelector(".dropdown-container");n.classList.contains("mouseenter")&&(e.el.optionClicked&&"function"==typeof e.el.optionClicked&&e.el.optionClicked(t,o),window.requestAnimationFrame(function(){n.classList.remove("mouseenter")}))},10)}),t.appendChild(o)}),t}},{key:"getList",value:function(){var e=E1.getModel(this.el,"list");try{e=JSON.parse(e)}catch(e){}return"string"==typeof e&&(e=e.split(",").map(function(e){return e.trim()})),e}},{key:"update",value:function(){var e=this.el.querySelector(".dropdown-container"),t=E1.getModel(this.el,"label"),n=this.getList();JSON.stringify(n)!==JSON.stringify(this.list)&&(this.list=n,e.replaceChild(this.getOptions(),e.querySelector(".dropdown-list-options"))),t!==this.label&&(this.label=t,e.replaceChild(this.getLabel(),e.querySelector(".dropdown-list-label")))}}]),e}();E1.registerComponent("dropdown-list",o)},{}],2:[function(e,t,n){"use strict";e("./dropdown-list")},{"./dropdown-list":1}],3:[function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var o=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=t,this.el["e1-value-onUpdate"]=this.update,this.value=E1.getModel(this.el,"e1-value"),this.valueType=this.typeOfValue(this.value),this.el.setAttribute("value",E1.getModel(this.el,"e1-value")),"textarea"===this.el.nodeName.toLowerCase()&&(this.el.innerHTML=E1.getModel(this.el,"e1-value")),this.el.addEventListener("input",function(){E1.setModel(n.el,"e1-value",n.el.value)})}return i(e,[{key:"typeOfValue",value:function(e){try{e=JSON.parse(e)}catch(e){}if(void 0===e)return"undefined";if(null===e)return"null";if(!0===e||!1===e)return"boolean";if("number"==typeof e)return"number";if("[object Date]"===Object.prototype.toString.call(e)||e.indexOf&&e.indexOf(":")>-1&&"Invalid Date"!==new Date(e)&&!isNaN(new Date(e)))return"date";if("string"==typeof e)return"string";var t={}.toString.apply(e);return"[object Array]"===t?"array":"[object Object]"===t?"object":"[object Function]"===t?"function":void 0}},{key:"update",value:function(){this.value=E1.getModel(this.el,"e1-value"),this.valueType=this.typeOfValue(this.value),this.el.setAttribute("value",E1.getModel(this.el,"e1-value"))}}]),e}();E1.registerAttribute("e1-value",o)},{}],4:[function(e,t,n){"use strict";e("./e1-value")},{"./e1-value":3}],5:[function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var r=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bindings={},this.components={},this.models={},this.subscriptions={},this.ids=[],this.cleanHtml=this.cleanHtml,this.generateId=this.generateId,this.getModel=this.getModel,this.getThis=this.getThis,this.registerComponent=this.registerComponent,this.registerElement=this.registerElement,this.scan=this.scan,this.setModel=this.setModel,this.setThis=this.setThis,this.subscribe=this.subscribe,this.updateBindings=this.updateBindings,this.observer=new window.MutationObserver(function(e){var n=Object.keys(t.components),i=function(e,n){e.nodeName&&e.nodeName.toLowerCase()===n&&t.components[n]._initElement(e)};e.forEach(function(e){if(e.addedNodes.length)for(var t=0;t<e.addedNodes.length;t++)n.forEach(function(n,o){i(e.addedNodes[t],o)})})})}return o(e,[{key:"cleanHtml",value:function(e){return e?e.toString().replace(/<script[^>]*?>.*?<\/script>/gi,"").replace(/<style[^>]*?>.*?<\/style>/gi,"").replace(/<![\s\S]*?--[ \t\n\r]*>/gi,""):""}},{key:"generateId",value:function(){for(var e=function(){for(var e="",t="abcdefghijklmnopqrstuvwxyz",n=0;n<26;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},t=e();this.ids.indexOf(t)>-1;)t=e();return this.ids.push(t),t}},{key:"getModel",value:function(e,t,n){var i;if(!e&&!t)return n;if(e&&t){var o=e.getAttribute(t);if(!o||"@"!==o.substring(0,1)){try{o=JSON.parse(o)}catch(e){}return o||n}i=o.substring(1,o.length)}else!e&&t&&"@"===t.substring(0,1)&&(i=t.substring(1,t.length));return i?this.getThis(window,i,n):n}},{key:"getThis",value:function(e,t,n){var i=(t=t&&t.toString().split?[e].concat(t.toString().split(".")):[e]).reduce(function(e,t){return void 0===e?n:t?e[t]:e});return void 0===i?n:i}},{key:"registerComponent",value:function(e,t){var n=this;this.components[e]={service:t,_initElement:function(t){if(-1===n.components[e].registeredElements.indexOf(t)){var i=new n.components[e].service(t);n.components[e].registeredElements.push(t),t.setAttribute("component-id",n.generateId()),t.onUpdate||(t.onUpdate=[]),t.onUpdate.push(i.update.bind(i)),n.registerElement(t)}},registeredElements:[],scan:function(t){var i=t.querySelectorAll(e);if(i.length)for(var o=0;o<i.length;o++)n.components[e]._initElement(i[o])}},"complete"===window.document.readyState&&this.components[e].scan(window.document.body)}},{key:"registerAttribute",value:function(e,t){var n=this;this.components[e]={service:t,_initElement:function(t){if(-1===n.components[e].registeredElements.indexOf(t)){var i=new n.components[e].service(t);n.components[e].registeredElements.push(t),t.onUpdate||(t.onUpdate=[]),t.onUpdate.push(i.update.bind(i)),n.registerElement(t)}},registeredElements:[],scan:function(t){var i=t.querySelectorAll("["+e+"]");if(i.length)for(var o=0;o<i.length;o++)n.components[e]._initElement(i[o])}},"complete"===window.document.readyState&&this.components[e].scan(window.document.body)}},{key:"registerElement",value:function(e){if(e&&e.attributes)for(var t=e.attributes,n=0;n<t.length;n++){var i=t[n].value;"@"===i.substring(0,1)&&(this.bindings[i]||(this.bindings[i]=[]),this.bindings[i].push(e))}}},{key:"scan",value:function(e){for(var t in this.components)this.components[t]&&this.components[t].scan(e)}},{key:"setModel",value:function(e,t,n){var o;if(!e&&!t)return!1;if(e&&t){var r=e.getAttribute(t);r&&"@"===r.substring(0,1)&&(o=r.substring(1,r.length))}else!e&&t&&"@"===t.substring(0,1)&&(o=t.substring(1,t.length));if(!o)return!1;var s=this.getThis(window,o);try{s=JSON.parse(JSON.stringify(s))}catch(e){}this.setThis(window,o,n);var a=this.getThis(window,o),u=s;try{"object"===(void 0===s?"undefined":i(s))&&"object"===(void 0===a?"undefined":i(a))?u=Object.assign(s,a):a&&(u=a)}catch(e){}return this.updateBindings("@"+o,u),a}},{key:"setThis",value:function(e,t,n){return(t=t?[e].concat(t.split(".")):[e]).reduce(function(e,i){return e||(e={}),e[i]||(e[i]={}),i?(i===t[t.length-1]&&(e[i]=n),e[i]):(e[i]=null,e)})}},{key:"subscribe",value:function(e,t){this.subscriptions[e]||(this.subscriptions[e]=[]),this.subscriptions[e].push(t)}},{key:"updateBindings",value:function(e,t){var n=this.bindings[e],o=this.subscriptions[e];if(o&&o.length&&o.forEach(function(e){e(t)}),n&&n.length&&n.forEach(function(e){e.onUpdate&&e.onUpdate.forEach(function(e){e()})}),t&&"object"===(void 0===t?"undefined":i(t)))for(var r in t)t[r]&&this.updateBindings(e+"."+r,t[r])}}]),e}();window.E1=new r,t.export=window.E1,"complete"===window.document.readyState?(window.E1.observer.observe(window.document.body,{attributes:!0,attributeOldValue:!0,childList:!0,subtree:!0,characterData:!0}),window.E1.scan(window.document.body)):window.document.addEventListener("DOMContentLoaded",function(){window.E1.observer.observe(window.document.body,{attributes:!0,attributeOldValue:!0,childList:!0,subtree:!0,characterData:!0}),window.E1.scan(window.document.body)})},{}],6:[function(e,t,n){"use strict";e("./e1"),e("./dropdown-list"),e("./e1-value")},{"./dropdown-list":2,"./e1":5,"./e1-value":4}]},{},[6]);
//# sourceMappingURL=e1.min.js.map
